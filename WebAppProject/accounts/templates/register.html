{% load static %}
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Welcome to our Family</h1>
            <h2>Signup</h2>
        </header>

        <section class="register-form-section">
            <form method="post" class="register-form" onsubmit="return validatePasswords()">
                {% csrf_token %}
                
                <!-- ‡∏ä‡πà‡∏≠‡∏á Username ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô -->
                <div class="input-group">
                    <span class="icon">üë§</span>
                    <input type="text" name="username" placeholder="Username (Student ID)" required>
                </div>
                
                <!-- ‡∏ä‡πà‡∏≠‡∏á Password ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô -->
                <div class="input-group">
                    <span class="icon">üîí</span>
                    <input type="password" name="password" placeholder="Password" required id="password-field">
                    <span class="toggle-password" onclick="togglePassword('password-field')">üëÅÔ∏è</span>
                </div>

                <!-- ‡∏ä‡πà‡∏≠‡∏á Confirm Password ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô -->
                <div class="input-group">
                    <span class="icon">üîí</span>
                    <input type="password" name="confirm_password" placeholder="Confirm Password" required id="confirm-password-field">
                    <span class="toggle-password" onclick="togglePassword('confirm-password-field')">üëÅÔ∏è</span>
                </div>
                
                <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏≤‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô -->
                <p id="password-error" style="color: #FF6B6B; display: none; font-size: 0.9rem;">Passwords do not match.</p>
                <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏≤‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ -->
                <p id="password-requirements-error" style="color: #FF6B6B; display: none; font-size: 0.9rem;">Password must contain both letters and numbers.</p>

                <!-- ‡∏ä‡πà‡∏≠‡∏á Email ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô -->
                <div class="input-group">
                    <span class="icon">‚úâÔ∏è</span>
                    <input type="email" name="email" placeholder="Email (University Email)" required>
                </div>
                
                <!-- ‡∏õ‡∏∏‡πà‡∏° SignUp -->
                <button type="submit">SignUp</button>
            </form>
            
            <p>Already have an account? <a href="{% url 'home' %}">Login</a></p>
        </section>

        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <div class="alert {{ message.tags }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
    </div>

    <script>
        function togglePassword(fieldId) {
            const field = document.getElementById(fieldId);
            field.type = field.type === "password" ? "text" : "password";
        }

        function validatePasswords() {
            const password = document.getElementById("password-field").value;
            const confirmPassword = document.getElementById("confirm-password-field").value;
            const passwordError = document.getElementById("password-error");
            const requirementsError = document.getElementById("password-requirements-error");

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            if (password !== confirmPassword) {
                passwordError.style.display = "block";
                requirementsError.style.display = "none";
                return false;
            } else {
                passwordError.style.display = "none";
            }

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            const hasLetter = /[a-zA-Z]/.test(password);
            const hasNumber = /[0-9]/.test(password);

            if (!hasLetter || !hasNumber) {
                requirementsError.style.display = "block";
                return false;
            } else {
                requirementsError.style.display = "none";
            }

            return true; // ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
        }
    </script>
</body>
</html>
